# Nix Configuration Tasks

[tasks.switch]
description = "Rebuild and switch darwin configuration"
run = "darwin-rebuild switch --flake ."

[tasks.check]
description = "Check configuration without applying"
run = "darwin-rebuild check --flake ."

[tasks.update]
description = "Update flake inputs"
run = "nix flake update"

[tasks.ai-status]
description = "Show current agent configuration status"
run = '''
echo "=== Claude Code ==="
ls -la ~/.claude/ 2>/dev/null || echo "Not configured"
echo ""
echo "=== Gemini CLI ==="
ls -la ~/.gemini/ 2>/dev/null || echo "Not configured"
echo ""
echo "=== MCP Servers ==="
head -20 ~/.config/claude/mcp-servers.json 2>/dev/null || echo "Not configured"
'''

[tasks.ai-update]
description = "Update ai git submodule to latest"
run = "git submodule update --remote ai"

[tasks.ai-validate]
description = "Validate JSON configurations"
run = '''
echo "Validating MCP servers..."
jq empty ~/.config/claude/mcp-servers.json && echo "MCP servers valid"
'''


